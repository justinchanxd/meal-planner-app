(this["webpackJsonpmeal-planner-app"]=this["webpackJsonpmeal-planner-app"]||[]).push([[0],{136:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(27),s=a.n(r),l=a(61),i=(a(136),a(109)),o=a(211),d=a(208),j=a(232),b=a(233),u=a(220),p=a(158),x=a(219),h=a(225),O=a(213),m=a(234),g=a(108),f=a.n(g),v=a(8),y=a(7),S=a(217),C=a(218),k=a(216),w=a(215),N=a(221),M=a(207),D=a(223),R=a(224),I=a(106),L=a.n(I),E=a(107),T=a.n(E),A=a(74),F=a.n(A),J=a(105),z=a.n(J);const U="mealPlanner",P="en-US",K={weekday:"short"},H={month:"short"},W={day:"numeric"},B={month:"short",day:"numeric"},G="0.6rem",V="0.1rem",q="application/json",Y="meal-planner.json",$="Invalid JSON file",Q=/^\d{4}-\d{2}-\d{2}$/,X="small";var Z=a(2);var _=e=>{var t;let{dateStr:a,type:n,i:c,meals:r,selectedMeals:s,toggleMealSelection:l,updateMeal:i}=e;const o=s.includes("".concat(c,"-").concat(n));return Object(Z.jsx)(k.a,{elevation:3,sx:{p:.5,textAlign:"center",backgroundColor:o?"primary.light":"background.paper",cursor:"pointer",border:o?"2px solid ".concat("#2196f3"):"2px solid transparent",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"center"},onClick:()=>l(c,n),children:Object(Z.jsx)(S.a,{sx:{mt:.25},children:Object(Z.jsxs)(S.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(Z.jsx)(u.a,{size:X,sx:{width:.5,height:.5},onClick:e=>{e.stopPropagation(),i(a,n,-1)},children:Object(Z.jsx)(z.a,{fontSize:V})}),Object(Z.jsx)(p.a,{variant:"body2",sx:{fontSize:"0.8rem",mx:.25},children:(null===(t=r[a])||void 0===t?void 0:t[n])||0}),Object(Z.jsx)(u.a,{size:X,sx:{width:.5,height:.5},onClick:e=>{e.stopPropagation(),i(a,n,1)},children:Object(Z.jsx)(F.a,{fontSize:V})})]})})})};var ee=e=>{let{resetTrigger:t}=e;const a=e=>{const t=new Date(e),a=t.getDay(),n=t.getDate()-a+(0===a?-6:1);return new Date(t.setDate(n))},[c,r]=Object(n.useState)(a(new Date)),[s,l]=Object(n.useState)({});Object(n.useEffect)(()=>{const e=localStorage.getItem(U);if(e){const t=JSON.parse(e),a=Object.fromEntries(Object.entries(t).filter(e=>{let[t]=e;return Q.test(t)}));l(a),localStorage.setItem(U,JSON.stringify(a))}},[]);const i=(e=>{const t=[];for(let a=0;a<7;a++){const n=new Date(e);n.setDate(e.getDate()+a),t.push(n)}return t})(c),[o,d]=Object(n.useState)([]),[j,b]=Object(n.useState)(!1),[x,h]=Object(n.useState)(!1);Object(n.useEffect)(()=>{const e=e=>{j&&(e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave?")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[j]),Object(n.useEffect)(()=>{t>0&&r(a(new Date))},[t]);const O=(e,t)=>{const a="".concat(e,"-").concat(t);d(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a])},m=e=>o.filter(t=>t.endsWith("-".concat(e))).reduce((t,a)=>{var n;const c=parseInt(a.split("-")[0]);return t+((null===(n=s[i[c].toISOString().split("T")[0]])||void 0===n?void 0:n[e])||0)},0),g=m("lunch"),f=m("dinner"),v=g+f,I=(i.reduce((e,t)=>{var a;return e+((null===(a=s[t.toISOString().split("T")[0]])||void 0===a?void 0:a.lunch)||0)},0),i.reduce((e,t)=>{var a;return e+((null===(a=s[t.toISOString().split("T")[0]])||void 0===a?void 0:a.dinner)||0)},0),e=>{const t=new Date(c);t.setDate(t.getDate()+7*e),r(t)}),E=(e,t,a)=>{l(n=>{var c,r,s,l;return Object(y.a)(Object(y.a)({},n),{},{[e]:{lunch:"lunch"===t?Math.max(0,((null===(c=n[e])||void 0===c?void 0:c.lunch)||0)+a):(null===(r=n[e])||void 0===r?void 0:r.lunch)||0,dinner:"dinner"===t?Math.max(0,((null===(s=n[e])||void 0===s?void 0:s.dinner)||0)+a):(null===(l=n[e])||void 0===l?void 0:l.dinner)||0}})}),b(!0)};return Object(Z.jsxs)(S.a,{className:"pageContainer",children:[Object(Z.jsx)(p.a,{variant:"h5",className:"titleTypography",children:"Meal Calendar\ud83d\udcc5"}),Object(Z.jsxs)(S.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[Object(Z.jsx)(u.a,{onClick:()=>I(-1),children:Object(Z.jsx)(L.a,{})}),Object(Z.jsxs)(p.a,{variant:"body1",className:"subtitleTypography",children:["Week of ",(e=>{const t=new Date(e);return t.setDate(e.getDate()+6),"".concat(e.toLocaleDateString(P,B)," - ").concat(t.toLocaleDateString(P,B))})(c)]}),Object(Z.jsx)(u.a,{onClick:()=>I(1),children:Object(Z.jsx)(T.a,{})})]}),Object(Z.jsx)(C.a,{container:!0,spacing:1,justifyContent:"center",children:i.map((e,t)=>{const a=e.toISOString().split("T")[0],n=e.toLocaleDateString(P,K),c=e.toLocaleDateString(P,H),r=e.toLocaleDateString(P,W);return Object(Z.jsx)(C.a,{item:!0,xs:1.6,sm:1.5,md:1.5,children:Object(Z.jsxs)(S.a,{sx:{display:"flex",flexDirection:"column",gap:1},children:[Object(Z.jsxs)(k.a,{elevation:3,sx:{p:.5,textAlign:"center",backgroundColor:"background.paper"},children:[Object(Z.jsx)(p.a,{variant:"caption",sx:{fontSize:G},children:n}),Object(Z.jsx)("br",{}),Object(Z.jsxs)(p.a,{variant:"caption",sx:{fontSize:G},children:[c," ",r]})]}),Object(Z.jsx)(_,{dateStr:a,type:"lunch",i:t,meals:s,selectedMeals:o,toggleMealSelection:O,updateMeal:E}),Object(Z.jsx)(_,{dateStr:a,type:"dinner",i:t,meals:s,selectedMeals:o,toggleMealSelection:O,updateMeal:E})]})},a)})}),Object(Z.jsx)(p.a,{variant:"body1",align:"center",sx:{mt:2},children:"\ud83d\udccaSelected Summary:"}),Object(Z.jsxs)(p.a,{variant:"body2",align:"center",children:["Lunch: ",g]}),Object(Z.jsxs)(p.a,{variant:"body2",align:"center",children:["Dinner: ",f]}),Object(Z.jsxs)(p.a,{variant:"body2",align:"center",children:["Total: ",v]}),Object(Z.jsxs)(S.a,{sx:{display:"flex",justifyContent:"center",mt:2,gap:1},children:[Object(Z.jsx)(w.a,{variant:"contained",onClick:()=>{localStorage.setItem(U,JSON.stringify(s)),b(!1),h(!0)},className:"buttonMp",children:"Save"}),Object(Z.jsx)(w.a,{variant:"outlined",onClick:()=>{const e=Object(y.a)({},s);i.forEach(t=>{const a=t.toISOString().split("T")[0];e[a]={lunch:0,dinner:0}}),l(e),b(!0)},className:"buttonMp",children:"Clear All"})]}),Object(Z.jsxs)(S.a,{sx:{display:"flex",justifyContent:"center",mt:.5,gap:1},children:[Object(Z.jsx)(w.a,{variant:"outlined",onClick:async()=>{const e=Object.fromEntries(Object.entries(s).filter(e=>{let[t,a]=e;const n=(null===a||void 0===a?void 0:a.lunch)||0,c=(null===a||void 0===a?void 0:a.dinner)||0;return n>0||c>0}).sort((e,t)=>{let[a]=e,[n]=t;return a.localeCompare(n)})),t=JSON.stringify(e,null,2),a=new Blob([t],{type:q}),n=new File([a],Y,{type:q});if(navigator.share&&navigator.canShare&&navigator.canShare({files:[n]}))try{await navigator.share({title:"Meal Planner Data",text:"Exported meal planner data",files:[n]})}catch(c){console.error("Share failed:",c);const e=URL.createObjectURL(a),t=document.createElement("a");t.href=e,t.download=Y,t.click(),URL.revokeObjectURL(e)}else{const e=URL.createObjectURL(a),t=document.createElement("a");t.href=e,t.download=Y,t.click(),URL.revokeObjectURL(e)}},className:"buttonMp",children:"Export"}),Object(Z.jsxs)(w.a,{variant:"outlined",component:"label",className:"buttonMp",children:["Import",Object(Z.jsx)("input",{type:"file",accept:".json",hidden:!0,onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{const t=JSON.parse(e.target.result);l(t),localStorage.setItem(U,JSON.stringify(t)),alert("Meals imported!")}catch(t){alert($)}},e.readAsText(t)}}})]})]}),Object(Z.jsxs)(N.a,{open:x,onClose:()=>h(!1),children:[Object(Z.jsx)(M.a,{children:"Data Saved"}),Object(Z.jsx)(D.a,{children:"Meal data saved successfully."}),Object(Z.jsx)(R.a,{children:Object(Z.jsx)(w.a,{onClick:()=>h(!1),className:"buttonMp",children:"OK"})})]})]})},te=a(209),ae=a(226),ne=a(227),ce=a(228),re=a(229),se=a(230),le=a(231),ie=a(79),oe=a(73);var de=()=>{const[e,t]=Object(n.useState)([]),[a,c]=Object(n.useState)(!1),[r,s]=Object(n.useState)("add"),[l,i]=Object(n.useState)({name:"",ingredients:"",instructions:"",remark:""}),[o,d]=(Object(n.useRef)(null),Object(n.useState)(""));Object(n.useEffect)(()=>{const e=localStorage.getItem("recipes");e&&t(JSON.parse(e))},[]);const j=e=>{t(e),localStorage.setItem("recipes",JSON.stringify(e))},b=e.filter(e=>Object.values(e).filter(e=>"string"===typeof e).some(e=>e.toLowerCase().includes(o.toLowerCase()))),u=Object(ie.b)({data:b,columns:[{accessorKey:"name",header:"Name"},{accessorKey:"ingredients",header:"Ingredients"},{accessorKey:"remark",header:"Remark"}],getCoreRowModel:Object(oe.b)(),getSortedRowModel:Object(oe.c)()});return Object(Z.jsxs)(S.a,{className:"pageContainer",children:[Object(Z.jsx)(p.a,{variant:"h5",className:"titleTypography",children:"Recipe\ud83d\udcdd"}),Object(Z.jsx)(S.a,{className:"boxMb2",sx:{display:"flex",justifyContent:"center"},children:Object(Z.jsx)(te.a,{label:"Search recipes",value:o,onChange:e=>d(e.target.value),className:"textField",sx:{maxWidth:400}})}),Object(Z.jsxs)(S.a,{className:"boxMb2 boxGap2",sx:{display:"flex",justifyContent:"center"},children:[Object(Z.jsx)(w.a,{variant:"contained",startIcon:Object(Z.jsx)(F.a,{}),onClick:()=>{s("add"),i({name:"",ingredients:"",instructions:"",remark:""}),c(!0)},className:"buttonMp buttonFixed",children:"Add Recipe"}),Object(Z.jsx)(w.a,{variant:"outlined",onClick:()=>{const t=JSON.stringify(e,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(t),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download","recipes.json"),n.click()},disabled:0===e.length,className:"buttonMp buttonFixed",children:"Export Recipes"}),"",""]}),Object(Z.jsx)(ae.a,{component:k.a,children:Object(Z.jsxs)(ne.a,{children:[Object(Z.jsx)(ce.a,{children:u.getHeaderGroups().map(e=>Object(Z.jsx)(re.a,{children:e.headers.map(e=>{var t;return Object(Z.jsxs)(se.a,{onClick:e.column.getToggleSortingHandler(),children:[Object(ie.a)(e.column.columnDef.header,e.getContext()),null!==(t={asc:" \ud83d\udd3c",desc:" \ud83d\udd3d"}[e.column.getIsSorted()])&&void 0!==t?t:null]},e.id)})},e.id))}),Object(Z.jsx)(le.a,{children:0===u.getRowModel().rows.length?Object(Z.jsx)(re.a,{children:Object(Z.jsx)(se.a,{colSpan:u.getAllColumns().length,align:"center",children:'No recipes found. Click "Add Recipe" to get started.'})}):u.getRowModel().rows.map(e=>Object(Z.jsx)(re.a,{onClick:()=>{s("edit"),i(Object(y.a)({},e.original)),c(!0)},className:"tableRow",children:e.getVisibleCells().map(e=>Object(Z.jsx)(se.a,{children:Object(ie.a)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),Object(Z.jsxs)(N.a,{open:a,onClose:()=>c(!1),className:"dialog",children:[Object(Z.jsx)(M.a,{children:"add"===r?"Add Recipe":"Edit Recipe"}),Object(Z.jsxs)(D.a,{children:[Object(Z.jsx)(te.a,{label:"Name",value:l.name,onChange:e=>i(Object(y.a)(Object(y.a)({},l),{},{name:e.target.value})),className:"textField",required:!0}),Object(Z.jsx)(te.a,{label:"Ingredients",value:l.ingredients,onChange:e=>i(Object(y.a)(Object(y.a)({},l),{},{ingredients:e.target.value})),className:"textField",multiline:!0,rows:4}),Object(Z.jsx)(te.a,{label:"Instructions",value:l.instructions,onChange:e=>i(Object(y.a)(Object(y.a)({},l),{},{instructions:e.target.value})),className:"textField",multiline:!0,rows:4}),Object(Z.jsx)(te.a,{label:"Remark",value:l.remark,onChange:e=>i(Object(y.a)(Object(y.a)({},l),{},{remark:e.target.value})),className:"textField",multiline:!0,rows:4})]}),Object(Z.jsxs)(R.a,{children:["edit"===r&&Object(Z.jsx)(w.a,{onClick:()=>{window.confirm("Are you sure you want to delete this recipe?")&&((t=>{const a=e.filter(e=>e.id!==t);j(a)})(l.id),c(!1))},variant:"outlined",color:"error",className:"buttonMp buttonFixed",children:"Delete"}),Object(Z.jsx)(w.a,{onClick:()=>c(!1),className:"buttonMp buttonFixed",children:"Cancel"}),Object(Z.jsx)(w.a,{onClick:()=>{if("add"===r){const t=Object(y.a)(Object(y.a)({},l),{},{id:Date.now()});j([...e,t])}else{const t=e.map(e=>e.id===l.id?l:e);j(t)}c(!1)},variant:"contained",disabled:!l.name.trim(),className:"buttonMp buttonFixed",children:"Save"})]})]})]})};const je=Object(i.a)({palette:{primary:{main:"#2196f3",dark:"#1769aa",light:"#4dabf5"},secondary:{main:"#2979ff",dark:"#1c54b2",light:"#5393ff"},background:{default:"#f0f8ff",paper:"#e3f2fd"}},typography:{fontSize:18}});var be=function(){const[e,t]=Object(n.useState)(!1),[a,c]=Object(n.useState)(0),r=Object(v.o)();return Object(Z.jsxs)(o.a,{theme:je,children:[Object(Z.jsx)(d.a,{}),Object(Z.jsx)(j.a,{position:"static",sx:{backgroundColor:"primary.light"},children:Object(Z.jsxs)(b.a,{children:[Object(Z.jsx)(u.a,{edge:"start",color:"inherit",onClick:()=>t(!0),children:Object(Z.jsx)(f.a,{})}),Object(Z.jsx)(p.a,{variant:"h5",sx:{ml:2},children:"Meal Planner \ud83c\udf73"})]})}),Object(Z.jsx)(x.a,{open:e,onClose:()=>t(!1),children:Object(Z.jsxs)(h.a,{sx:{width:200},children:[Object(Z.jsx)(O.a,{button:!0,component:l.b,to:"/calendar",selected:"/calendar"===r.pathname,onClick:()=>{c(e=>e+1),t(!1)},sx:{backgroundColor:"/calendar"===r.pathname?"primary.light":"transparent","&.Mui-selected":{backgroundColor:"primary.light","&:hover":{backgroundColor:"primary.main"}}},children:Object(Z.jsx)(m.a,{primary:"Calendar",sx:{fontSize:"1.2rem"}})}),Object(Z.jsx)(O.a,{button:!0,component:l.b,to:"/recipe",selected:"/recipe"===r.pathname,onClick:()=>t(!1),sx:{backgroundColor:"/recipe"===r.pathname?"primary.light":"transparent","&.Mui-selected":{backgroundColor:"primary.light","&:hover":{backgroundColor:"primary.main"}}},children:Object(Z.jsx)(m.a,{primary:"Recipe",sx:{fontSize:"1.2rem"}})})]})}),Object(Z.jsxs)(v.d,{children:[Object(Z.jsx)(v.b,{path:"/",element:Object(Z.jsx)(v.a,{to:"/calendar",replace:!0})}),Object(Z.jsx)(v.b,{path:"/calendar",element:Object(Z.jsx)(ee,{resetTrigger:a})}),Object(Z.jsx)(v.b,{path:"/recipe",element:Object(Z.jsx)(de,{})})]})]})};s.a.render(Object(Z.jsx)(c.a.StrictMode,{children:Object(Z.jsx)(l.a,{basename:"/meal-planner-app",children:Object(Z.jsx)(be,{})})}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.724b4e8e.chunk.js.map