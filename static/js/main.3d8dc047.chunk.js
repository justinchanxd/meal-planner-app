(this["webpackJsonpmeal-planner-app"]=this["webpackJsonpmeal-planner-app"]||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),i=n.n(c),l=n(88),o=n(177),s=n(189),d=n(190),j=n(191),h=n(184),u=n(135),x=n(183),b=n(192),p=n(178),O=n(193),m=n(87),g=n.n(m),f=n(61),v=n(180),S=n(181),y=n(182),k=n(179),C=n(185),w=n(173),D=n(187),z=n(188),I=n(85),L=n.n(I),U=n(86),E=n.n(U),P=n(74),T=n.n(P),J=n(73),R=n.n(J);const A="80px";var M=n(2);var N=e=>{let{resetTrigger:t}=e;const n=e=>{const t=new Date(e),n=t.getDay(),a=t.getDate()-n+(0===n?-6:1);return new Date(t.setDate(a))},[r,c]=Object(a.useState)(n(new Date)),[i,l]=Object(a.useState)({});Object(a.useEffect)(()=>{const e=localStorage.getItem("mealPlanner");if(e){const t=JSON.parse(e),n=Object.fromEntries(Object.entries(t).filter(e=>{let[t]=e;return/^\d{4}-\d{2}-\d{2}$/.test(t)}));l(n),localStorage.setItem("mealPlanner",JSON.stringify(n))}},[]);const o=(e=>{const t=[];for(let n=0;n<7;n++){const a=new Date(e);a.setDate(e.getDate()+n),t.push(a)}return t})(r),[s,d]=Object(a.useState)(()=>{const e=[];for(let t=0;t<7;t++)e.push("".concat(t,"-lunch"),"".concat(t,"-dinner"));return e}),[j,x]=Object(a.useState)(!1),[b,p]=Object(a.useState)(!1);Object(a.useEffect)(()=>{const e=e=>{j&&(e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave?")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[j]),Object(a.useEffect)(()=>{t>0&&c(n(new Date))},[t]);const O=(e,t)=>{const n="".concat(e,"-").concat(t);d(e=>e.includes(n)?e.filter(e=>e!==n):[...e,n])},m=s.filter(e=>e.endsWith("-lunch")).reduce((e,t)=>{var n;const a=parseInt(t.split("-")[0]);return e+((null===(n=i[o[a].toISOString().split("T")[0]])||void 0===n?void 0:n.lunch)||0)},0),g=s.filter(e=>e.endsWith("-dinner")).reduce((e,t)=>{var n;const a=parseInt(t.split("-")[0]);return e+((null===(n=i[o[a].toISOString().split("T")[0]])||void 0===n?void 0:n.dinner)||0)},0),I=m+g,U=(o.reduce((e,t)=>{var n;return e+((null===(n=i[t.toISOString().split("T")[0]])||void 0===n?void 0:n.lunch)||0)},0),o.reduce((e,t)=>{var n;return e+((null===(n=i[t.toISOString().split("T")[0]])||void 0===n?void 0:n.dinner)||0)},0),e=>{const t=new Date(r);t.setDate(t.getDate()+7*e),c(t)}),P=(e,t,n)=>{l(a=>{var r,c,i,l;return Object(f.a)(Object(f.a)({},a),{},{[e]:{lunch:"lunch"===t?Math.max(0,((null===(r=a[e])||void 0===r?void 0:r.lunch)||0)+n):(null===(c=a[e])||void 0===c?void 0:c.lunch)||0,dinner:"dinner"===t?Math.max(0,((null===(i=a[e])||void 0===i?void 0:i.dinner)||0)+n):(null===(l=a[e])||void 0===l?void 0:l.dinner)||0}})}),x(!0)};return Object(M.jsxs)(v.a,{sx:{p:.5,backgroundColor:"background.default",minHeight:"100vh"},children:[Object(M.jsxs)(u.a,{variant:"body1",align:"center",gutterBottom:!0,children:[Object(M.jsx)(h.a,{size:"small",sx:{width:20,height:20,mr:1},onClick:()=>U(-1),children:Object(M.jsx)(L.a,{fontSize:"small"})}),"Week of ",(e=>{const t=new Date(e);return t.setDate(e.getDate()+6),"".concat(e.toLocaleDateString("en-US",{month:"short",day:"numeric"})," - ").concat(t.toLocaleDateString("en-US",{month:"short",day:"numeric"}))})(r),Object(M.jsx)(h.a,{size:"small",sx:{width:20,height:20,ml:1},onClick:()=>U(1),children:Object(M.jsx)(E.a,{fontSize:"small"})})]}),Object(M.jsx)(S.a,{container:!0,spacing:1,justifyContent:"center",children:o.map((e,t)=>{var n,a;const r=e.toISOString().split("T")[0],c=e.toLocaleDateString("en-US",{weekday:"short"}),l=e.toLocaleDateString("en-US",{month:"short"}),o=e.toLocaleDateString("en-US",{day:"numeric"});return Object(M.jsx)(S.a,{item:!0,xs:1.6,sm:4,md:2,children:Object(M.jsxs)(v.a,{sx:{display:"flex",flexDirection:"column",gap:1},children:[Object(M.jsxs)(y.a,{elevation:3,sx:{p:.5,textAlign:"center",backgroundColor:"background.paper"},children:[Object(M.jsx)(u.a,{variant:"caption",sx:{fontSize:"0.6rem"},children:c}),Object(M.jsx)("br",{}),Object(M.jsxs)(u.a,{variant:"caption",sx:{fontSize:"0.6rem"},children:[l," ",o]})]}),Object(M.jsx)(y.a,{elevation:3,sx:{p:.5,textAlign:"center",backgroundColor:s.includes("".concat(t,"-lunch"))?"primary.light":"background.paper",cursor:"pointer",border:s.includes("".concat(t,"-lunch"))?"2px solid #2196f3":"2px solid transparent",minHeight:A,display:"flex",flexDirection:"column",justifyContent:"center"},onClick:()=>O(t,"lunch"),children:Object(M.jsx)(v.a,{sx:{mt:.25},children:Object(M.jsxs)(v.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(M.jsx)(h.a,{size:"small",sx:{width:.5,height:.5},onClick:e=>{e.stopPropagation(),P(r,"lunch",-1)},children:Object(M.jsx)(R.a,{fontSize:"0.1rem"})}),Object(M.jsx)(u.a,{variant:"body2",sx:{fontSize:"0.8rem",mx:.25},children:(null===(n=i[r])||void 0===n?void 0:n.lunch)||0}),Object(M.jsx)(h.a,{size:"small",sx:{width:.5,height:.5},onClick:e=>{e.stopPropagation(),P(r,"lunch",1)},children:Object(M.jsx)(T.a,{fontSize:"0.01rem"})})]})})}),Object(M.jsx)(y.a,{elevation:3,sx:{p:.5,textAlign:"center",backgroundColor:s.includes("".concat(t,"-dinner"))?"primary.light":"background.paper",cursor:"pointer",border:s.includes("".concat(t,"-dinner"))?"2px solid #2196f3":"2px solid transparent",minHeight:A,display:"flex",flexDirection:"column",justifyContent:"center"},onClick:()=>O(t,"dinner"),children:Object(M.jsx)(v.a,{sx:{mt:.25},children:Object(M.jsxs)(v.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(M.jsx)(h.a,{size:"small",sx:{width:.5,height:.5},onClick:e=>{e.stopPropagation(),P(r,"dinner",-1)},children:Object(M.jsx)(R.a,{fontSize:"0.1rem"})}),Object(M.jsx)(u.a,{variant:"body2",sx:{fontSize:"0.8rem",mx:.25},children:(null===(a=i[r])||void 0===a?void 0:a.dinner)||0}),Object(M.jsx)(h.a,{size:"small",sx:{width:.5,height:.5},onClick:e=>{e.stopPropagation(),P(r,"dinner",1)},children:Object(M.jsx)(T.a,{fontSize:"0.01rem"})})]})})})]})},r)})}),Object(M.jsx)(u.a,{variant:"body1",align:"center",sx:{mt:2},children:"Selected Summary:"}),Object(M.jsxs)(u.a,{variant:"body2",align:"center",children:["Lunch: ",m]}),Object(M.jsxs)(u.a,{variant:"body2",align:"center",children:["Dinner: ",g]}),Object(M.jsxs)(u.a,{variant:"body2",align:"center",children:["Total: ",I]}),Object(M.jsxs)(v.a,{sx:{display:"flex",justifyContent:"center",mt:2,gap:1},children:[Object(M.jsx)(k.a,{variant:"contained",onClick:()=>{localStorage.setItem("mealPlanner",JSON.stringify(i)),x(!1),p(!0)},children:"Save"}),Object(M.jsx)(k.a,{variant:"outlined",onClick:()=>{const e=Object(f.a)({},i);o.forEach(t=>{const n=t.toISOString().split("T")[0];e[n]={lunch:0,dinner:0}}),l(e),x(!0)},children:"Clear All"}),Object(M.jsx)(k.a,{variant:"outlined",onClick:()=>d([]),children:"Unselect All"})]}),Object(M.jsxs)(v.a,{sx:{display:"flex",justifyContent:"center",mt:.5,gap:1},children:[Object(M.jsx)(k.a,{variant:"outlined",onClick:async()=>{const e=Object.fromEntries(Object.entries(i).filter(e=>{let[t,n]=e;const a=(null===n||void 0===n?void 0:n.lunch)||0,r=(null===n||void 0===n?void 0:n.dinner)||0;return a>0||r>0}).sort((e,t)=>{let[n]=e,[a]=t;return n.localeCompare(a)})),t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),a=new File([n],"meal-planner.json",{type:"application/json"});if(navigator.share&&navigator.canShare&&navigator.canShare({files:[a]}))try{await navigator.share({title:"Meal Planner Data",text:"Exported meal planner data",files:[a]})}catch(r){console.error("Share failed:",r);const e=URL.createObjectURL(n),t=document.createElement("a");t.href=e,t.download="meal-planner.json",t.click(),URL.revokeObjectURL(e)}else{const e=URL.createObjectURL(n),t=document.createElement("a");t.href=e,t.download="meal-planner.json",t.click(),URL.revokeObjectURL(e)}},children:"Export"}),Object(M.jsxs)(k.a,{variant:"outlined",component:"label",children:["Import",Object(M.jsx)("input",{type:"file",accept:".json",hidden:!0,onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{const t=JSON.parse(e.target.result);l(t),localStorage.setItem("mealPlanner",JSON.stringify(t)),alert("Meals imported!")}catch(t){alert("Invalid JSON file")}},e.readAsText(t)}}})]})]}),Object(M.jsxs)(C.a,{open:b,onClose:()=>p(!1),children:[Object(M.jsx)(w.a,{children:"Data Saved"}),Object(M.jsx)(D.a,{children:"Meal data saved successfully."}),Object(M.jsx)(z.a,{children:Object(M.jsx)(k.a,{onClick:()=>p(!1),children:"OK"})})]})]})};const H=Object(l.a)({palette:{primary:{main:"#2196f3",dark:"#1769aa",light:"#4dabf5"},secondary:{main:"#2979ff",dark:"#1c54b2",light:"#5393ff"},background:{default:"#f0f8ff",paper:"#e3f2fd"}},typography:{fontSize:18}});var W=function(){const[e,t]=Object(a.useState)(!1),[n,r]=Object(a.useState)(0);return Object(M.jsxs)(o.a,{theme:H,children:[Object(M.jsx)(s.a,{}),Object(M.jsx)(d.a,{position:"static",sx:{backgroundColor:"primary.light"},children:Object(M.jsxs)(j.a,{children:[Object(M.jsx)(h.a,{edge:"start",color:"inherit",onClick:()=>t(!0),children:Object(M.jsx)(g.a,{})}),Object(M.jsx)(u.a,{variant:"h5",sx:{ml:2},children:"Weekly Meal Planner"})]})}),Object(M.jsx)(x.a,{open:e,onClose:()=>t(!1),children:Object(M.jsx)(b.a,{sx:{width:250},children:Object(M.jsx)(p.a,{button:!0,onClick:()=>{r(e=>e+1),t(!1)},children:Object(M.jsx)(O.a,{primary:"Homepage",sx:{fontSize:"1.2rem"}})})})}),Object(M.jsx)(N,{resetTrigger:n})]})};i.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsx)(W,{})}),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.3d8dc047.chunk.js.map