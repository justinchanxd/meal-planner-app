(this["webpackJsonpmeal-planner-app"]=this["webpackJsonpmeal-planner-app"]||[]).push([[0],{134:function(e,t,a){},140:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(27),l=a.n(r),s=a(60),i=(a(134),a(107)),o=a(211),d=a(208),j=a(232),b=a(233),u=a(220),p=a(156),h=a(219),O=a(225),x=a(213),m=a(234),g=a(106),f=a.n(g),v=a(8),S=a(7),y=a(217),C=a(218),k=a(216),w=a(215),N=a(221),M=a(207),D=a(223),R=a(224),I=a(73),L=a.n(I),E=a(105),T=a.n(E);const A="mealPlanner",F="en-US",J={weekday:"short"},z={month:"short"},U={day:"numeric"},P={month:"short",day:"numeric"},K="0.6rem",H="0.1rem",W="application/json",B="meal-planner.json",G="Invalid JSON file",V=/^\d{4}-\d{2}-\d{2}$/,q="small";var Y=a(2);var $=e=>{var t;let{dateStr:a,type:n,i:c,meals:r,selectedMeals:l,toggleMealSelection:s,updateMeal:i}=e;const o=l.includes("".concat(c,"-").concat(n));return Object(Y.jsx)(k.a,{elevation:3,sx:{p:.5,textAlign:"center",backgroundColor:o?"primary.light":"background.paper",cursor:"pointer",border:o?"2px solid ".concat("#2196f3"):"2px solid transparent",minHeight:"80px",display:"flex",flexDirection:"column",justifyContent:"center"},onClick:()=>s(c,n),children:Object(Y.jsx)(y.a,{sx:{mt:.25},children:Object(Y.jsxs)(y.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(Y.jsx)(u.a,{size:q,sx:{width:.5,height:.5},onClick:e=>{e.stopPropagation(),i(a,n,-1)},children:Object(Y.jsx)(T.a,{fontSize:H})}),Object(Y.jsx)(p.a,{variant:"body2",sx:{fontSize:"0.8rem",mx:.25},children:(null===(t=r[a])||void 0===t?void 0:t[n])||0}),Object(Y.jsx)(u.a,{size:q,sx:{width:.5,height:.5},onClick:e=>{e.stopPropagation(),i(a,n,1)},children:Object(Y.jsx)(L.a,{fontSize:H})})]})})})};var Q=e=>{let{resetTrigger:t}=e;const a=e=>{const t=new Date(e),a=t.getDay(),n=t.getDate()-a+(0===a?-6:1);return new Date(t.setDate(n))},[c,r]=Object(n.useState)(a(new Date)),[l,s]=Object(n.useState)({});Object(n.useEffect)(()=>{const e=localStorage.getItem(A);if(e){const t=JSON.parse(e),a=Object.fromEntries(Object.entries(t).filter(e=>{let[t]=e;return V.test(t)}));s(a),localStorage.setItem(A,JSON.stringify(a))}},[]);const i=(e=>{const t=[];for(let a=0;a<7;a++){const n=new Date(e);n.setDate(e.getDate()+a),t.push(n)}return t})(c),[o,d]=Object(n.useState)([]),[j,b]=Object(n.useState)(!1),[u,h]=Object(n.useState)(!1);Object(n.useEffect)(()=>{const e=e=>{j&&(e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave?")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[j]),Object(n.useEffect)(()=>{t>0&&r(a(new Date))},[t]);const O=(e,t)=>{const a="".concat(e,"-").concat(t);d(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a])},x=e=>o.filter(t=>t.endsWith("-".concat(e))).reduce((t,a)=>{var n;const c=parseInt(a.split("-")[0]);return t+((null===(n=l[i[c].toISOString().split("T")[0]])||void 0===n?void 0:n[e])||0)},0),m=x("lunch"),g=x("dinner"),f=m+g,v=(i.reduce((e,t)=>{var a;return e+((null===(a=l[t.toISOString().split("T")[0]])||void 0===a?void 0:a.lunch)||0)},0),i.reduce((e,t)=>{var a;return e+((null===(a=l[t.toISOString().split("T")[0]])||void 0===a?void 0:a.dinner)||0)},0),(e,t,a)=>{s(n=>{var c,r,l,s;return Object(S.a)(Object(S.a)({},n),{},{[e]:{lunch:"lunch"===t?Math.max(0,((null===(c=n[e])||void 0===c?void 0:c.lunch)||0)+a):(null===(r=n[e])||void 0===r?void 0:r.lunch)||0,dinner:"dinner"===t?Math.max(0,((null===(l=n[e])||void 0===l?void 0:l.dinner)||0)+a):(null===(s=n[e])||void 0===s?void 0:s.dinner)||0}})}),b(!0)});return Object(Y.jsxs)(y.a,{className:"pageContainer",children:[Object(Y.jsx)(p.a,{variant:"h5",className:"titleTypography",children:"Meal Calendar\ud83d\udcc5"}),Object(Y.jsxs)(p.a,{variant:"body1",className:"subtitleTypography",children:["Week of ",(e=>{const t=new Date(e);return t.setDate(e.getDate()+6),"".concat(e.toLocaleDateString(F,P)," - ").concat(t.toLocaleDateString(F,P))})(c)]}),Object(Y.jsx)(C.a,{container:!0,spacing:1,justifyContent:"center",children:i.map((e,t)=>{const a=e.toISOString().split("T")[0],n=e.toLocaleDateString(F,J),c=e.toLocaleDateString(F,z),r=e.toLocaleDateString(F,U);return Object(Y.jsx)(C.a,{item:!0,xs:1.6,sm:1.5,md:1.5,children:Object(Y.jsxs)(y.a,{sx:{display:"flex",flexDirection:"column",gap:1},children:[Object(Y.jsxs)(k.a,{elevation:3,sx:{p:.5,textAlign:"center",backgroundColor:"background.paper"},children:[Object(Y.jsx)(p.a,{variant:"caption",sx:{fontSize:K},children:n}),Object(Y.jsx)("br",{}),Object(Y.jsxs)(p.a,{variant:"caption",sx:{fontSize:K},children:[c," ",r]})]}),Object(Y.jsx)($,{dateStr:a,type:"lunch",i:t,meals:l,selectedMeals:o,toggleMealSelection:O,updateMeal:v}),Object(Y.jsx)($,{dateStr:a,type:"dinner",i:t,meals:l,selectedMeals:o,toggleMealSelection:O,updateMeal:v})]})},a)})}),Object(Y.jsx)(p.a,{variant:"body1",align:"center",sx:{mt:2},children:"\ud83d\udccaSelected Summary:"}),Object(Y.jsxs)(p.a,{variant:"body2",align:"center",children:["Lunch: ",m]}),Object(Y.jsxs)(p.a,{variant:"body2",align:"center",children:["Dinner: ",g]}),Object(Y.jsxs)(p.a,{variant:"body2",align:"center",children:["Total: ",f]}),Object(Y.jsxs)(y.a,{sx:{display:"flex",justifyContent:"center",mt:2,gap:1},children:[Object(Y.jsx)(w.a,{variant:"contained",onClick:()=>{localStorage.setItem(A,JSON.stringify(l)),b(!1),h(!0)},className:"buttonMp",children:"Save"}),Object(Y.jsx)(w.a,{variant:"outlined",onClick:()=>{const e=Object(S.a)({},l);i.forEach(t=>{const a=t.toISOString().split("T")[0];e[a]={lunch:0,dinner:0}}),s(e),b(!0)},className:"buttonMp",children:"Clear All"})]}),Object(Y.jsxs)(y.a,{sx:{display:"flex",justifyContent:"center",mt:.5,gap:1},children:[Object(Y.jsx)(w.a,{variant:"outlined",onClick:async()=>{const e=Object.fromEntries(Object.entries(l).filter(e=>{let[t,a]=e;const n=(null===a||void 0===a?void 0:a.lunch)||0,c=(null===a||void 0===a?void 0:a.dinner)||0;return n>0||c>0}).sort((e,t)=>{let[a]=e,[n]=t;return a.localeCompare(n)})),t=JSON.stringify(e,null,2),a=new Blob([t],{type:W}),n=new File([a],B,{type:W});if(navigator.share&&navigator.canShare&&navigator.canShare({files:[n]}))try{await navigator.share({title:"Meal Planner Data",text:"Exported meal planner data",files:[n]})}catch(c){console.error("Share failed:",c);const e=URL.createObjectURL(a),t=document.createElement("a");t.href=e,t.download=B,t.click(),URL.revokeObjectURL(e)}else{const e=URL.createObjectURL(a),t=document.createElement("a");t.href=e,t.download=B,t.click(),URL.revokeObjectURL(e)}},className:"buttonMp",children:"Export"}),Object(Y.jsxs)(w.a,{variant:"outlined",component:"label",className:"buttonMp",children:["Import",Object(Y.jsx)("input",{type:"file",accept:".json",hidden:!0,onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{const t=JSON.parse(e.target.result);s(t),localStorage.setItem(A,JSON.stringify(t)),alert("Meals imported!")}catch(t){alert(G)}},e.readAsText(t)}}})]})]}),Object(Y.jsxs)(N.a,{open:u,onClose:()=>h(!1),children:[Object(Y.jsx)(M.a,{children:"Data Saved"}),Object(Y.jsx)(D.a,{children:"Meal data saved successfully."}),Object(Y.jsx)(R.a,{children:Object(Y.jsx)(w.a,{onClick:()=>h(!1),className:"buttonMp",children:"OK"})})]})]})},X=a(209),Z=a(226),_=a(227),ee=a(228),te=a(229),ae=a(230),ne=a(231),ce=a(78),re=a(72);var le=()=>{const[e,t]=Object(n.useState)([]),[a,c]=Object(n.useState)(!1),[r,l]=Object(n.useState)("add"),[s,i]=Object(n.useState)({name:"",ingredients:"",instructions:"",remark:""}),[o,d]=(Object(n.useRef)(null),Object(n.useState)(""));Object(n.useEffect)(()=>{const e=localStorage.getItem("recipes");e&&t(JSON.parse(e))},[]);const j=e=>{t(e),localStorage.setItem("recipes",JSON.stringify(e))},b=e.filter(e=>Object.values(e).filter(e=>"string"===typeof e).some(e=>e.toLowerCase().includes(o.toLowerCase()))),u=Object(ce.b)({data:b,columns:[{accessorKey:"name",header:"Name"},{accessorKey:"ingredients",header:"Ingredients"},{accessorKey:"remark",header:"Remark"}],getCoreRowModel:Object(re.b)(),getSortedRowModel:Object(re.c)()});return Object(Y.jsxs)(y.a,{className:"pageContainer",children:[Object(Y.jsx)(p.a,{variant:"h5",className:"titleTypography",children:"Recipe\ud83d\udcdd"}),Object(Y.jsx)(y.a,{className:"boxMb2",sx:{display:"flex",justifyContent:"center"},children:Object(Y.jsx)(X.a,{label:"Search recipes",value:o,onChange:e=>d(e.target.value),className:"textField",sx:{maxWidth:400}})}),Object(Y.jsxs)(y.a,{className:"boxMb2 boxGap2",sx:{display:"flex",justifyContent:"center"},children:[Object(Y.jsx)(w.a,{variant:"contained",startIcon:Object(Y.jsx)(L.a,{}),onClick:()=>{l("add"),i({name:"",ingredients:"",instructions:"",remark:""}),c(!0)},className:"buttonMp buttonFixed",children:"Add Recipe"}),Object(Y.jsx)(w.a,{variant:"outlined",onClick:()=>{const t=JSON.stringify(e,null,2),a="data:application/json;charset=utf-8,"+encodeURIComponent(t),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download","recipes.json"),n.click()},disabled:0===e.length,className:"buttonMp buttonFixed",children:"Export Recipes"}),"",""]}),Object(Y.jsx)(Z.a,{component:k.a,children:Object(Y.jsxs)(_.a,{children:[Object(Y.jsx)(ee.a,{children:u.getHeaderGroups().map(e=>Object(Y.jsx)(te.a,{children:e.headers.map(e=>{var t;return Object(Y.jsxs)(ae.a,{onClick:e.column.getToggleSortingHandler(),children:[Object(ce.a)(e.column.columnDef.header,e.getContext()),null!==(t={asc:" \ud83d\udd3c",desc:" \ud83d\udd3d"}[e.column.getIsSorted()])&&void 0!==t?t:null]},e.id)})},e.id))}),Object(Y.jsx)(ne.a,{children:0===u.getRowModel().rows.length?Object(Y.jsx)(te.a,{children:Object(Y.jsx)(ae.a,{colSpan:u.getAllColumns().length,align:"center",children:'No recipes found. Click "Add Recipe" to get started.'})}):u.getRowModel().rows.map(e=>Object(Y.jsx)(te.a,{onClick:()=>{l("edit"),i(Object(S.a)({},e.original)),c(!0)},className:"tableRow",children:e.getVisibleCells().map(e=>Object(Y.jsx)(ae.a,{children:Object(ce.a)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),Object(Y.jsxs)(N.a,{open:a,onClose:()=>c(!1),className:"dialog",children:[Object(Y.jsx)(M.a,{children:"add"===r?"Add Recipe":"Edit Recipe"}),Object(Y.jsxs)(D.a,{children:[Object(Y.jsx)(X.a,{label:"Name",value:s.name,onChange:e=>i(Object(S.a)(Object(S.a)({},s),{},{name:e.target.value})),className:"textField",required:!0}),Object(Y.jsx)(X.a,{label:"Ingredients",value:s.ingredients,onChange:e=>i(Object(S.a)(Object(S.a)({},s),{},{ingredients:e.target.value})),className:"textField",multiline:!0,rows:4}),Object(Y.jsx)(X.a,{label:"Instructions",value:s.instructions,onChange:e=>i(Object(S.a)(Object(S.a)({},s),{},{instructions:e.target.value})),className:"textField",multiline:!0,rows:4}),Object(Y.jsx)(X.a,{label:"Remark",value:s.remark,onChange:e=>i(Object(S.a)(Object(S.a)({},s),{},{remark:e.target.value})),className:"textField",multiline:!0,rows:4})]}),Object(Y.jsxs)(R.a,{children:["edit"===r&&Object(Y.jsx)(w.a,{onClick:()=>{window.confirm("Are you sure you want to delete this recipe?")&&((t=>{const a=e.filter(e=>e.id!==t);j(a)})(s.id),c(!1))},variant:"outlined",color:"error",className:"buttonMp buttonFixed",children:"Delete"}),Object(Y.jsx)(w.a,{onClick:()=>c(!1),className:"buttonMp buttonFixed",children:"Cancel"}),Object(Y.jsx)(w.a,{onClick:()=>{if("add"===r){const t=Object(S.a)(Object(S.a)({},s),{},{id:Date.now()});j([...e,t])}else{const t=e.map(e=>e.id===s.id?s:e);j(t)}c(!1)},variant:"contained",disabled:!s.name.trim(),className:"buttonMp buttonFixed",children:"Save"})]})]})]})};const se=Object(i.a)({palette:{primary:{main:"#2196f3",dark:"#1769aa",light:"#4dabf5"},secondary:{main:"#2979ff",dark:"#1c54b2",light:"#5393ff"},background:{default:"#f0f8ff",paper:"#e3f2fd"}},typography:{fontSize:18}});var ie=function(){const[e,t]=Object(n.useState)(!1),[a,c]=Object(n.useState)(0),r=Object(v.o)();return Object(Y.jsxs)(o.a,{theme:se,children:[Object(Y.jsx)(d.a,{}),Object(Y.jsx)(j.a,{position:"static",sx:{backgroundColor:"primary.light"},children:Object(Y.jsxs)(b.a,{children:[Object(Y.jsx)(u.a,{edge:"start",color:"inherit",onClick:()=>t(!0),children:Object(Y.jsx)(f.a,{})}),Object(Y.jsx)(p.a,{variant:"h5",sx:{ml:2},children:"Meal Planner \ud83c\udf73"})]})}),Object(Y.jsx)(h.a,{open:e,onClose:()=>t(!1),children:Object(Y.jsxs)(O.a,{sx:{width:250},children:[Object(Y.jsx)(x.a,{button:!0,component:s.b,to:"/calendar",selected:"/calendar"===r.pathname,onClick:()=>{c(e=>e+1),t(!1)},sx:{backgroundColor:"/calendar"===r.pathname?"primary.light":"transparent","&.Mui-selected":{backgroundColor:"primary.light","&:hover":{backgroundColor:"primary.main"}}},children:Object(Y.jsx)(m.a,{primary:"Calendar",sx:{fontSize:"1.2rem"}})}),Object(Y.jsx)(x.a,{button:!0,component:s.b,to:"/recipe",selected:"/recipe"===r.pathname,onClick:()=>t(!1),sx:{backgroundColor:"/recipe"===r.pathname?"primary.light":"transparent","&.Mui-selected":{backgroundColor:"primary.light","&:hover":{backgroundColor:"primary.main"}}},children:Object(Y.jsx)(m.a,{primary:"Recipe",sx:{fontSize:"1.2rem"}})})]})}),Object(Y.jsxs)(v.d,{children:[Object(Y.jsx)(v.b,{path:"/",element:Object(Y.jsx)(v.a,{to:"/calendar",replace:!0})}),Object(Y.jsx)(v.b,{path:"/calendar",element:Object(Y.jsx)(Q,{resetTrigger:a})}),Object(Y.jsx)(v.b,{path:"/recipe",element:Object(Y.jsx)(le,{})})]})]})};l.a.render(Object(Y.jsx)(c.a.StrictMode,{children:Object(Y.jsx)(s.a,{basename:"/meal-planner-app",children:Object(Y.jsx)(ie,{})})}),document.getElementById("root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.85f74aa4.chunk.js.map